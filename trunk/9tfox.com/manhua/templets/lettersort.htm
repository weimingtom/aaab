<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv='Content-Type' content='text/html; charset=utf-8'>
<title>新增自由列表</title>
<link href='img/base.css' rel='stylesheet' type='text/css'>
<script src="js/main.js" language="javascript"></script>
<script language="JavaScript">
function ChangeListStyle(){
   var itxt = document.getElementById("myinnertext");
   var myems = document.getElementsByName("liststyle");
   if(myems[0].checked) itxt.value = document.getElementById("list1").innerHTML;
   else if(myems[1].checked) itxt.value = document.getElementById("list2").innerHTML;
   else if(myems[2].checked) itxt.value = document.getElementById("list3").innerHTML;
   else if(myems[3].checked) itxt.value = document.getElementById("list4").innerHTML;
   itxt.value = itxt.value.replace("<BR>","<BR/>");
   itxt.value = itxt.value.toLowerCase();
}
function ShowHide(objname){
  var obj = document.getElementById(objname);
  if(obj.style.display == "block" || obj.style.display == "")
	   obj.style.display = "none";
  else
	   obj.style.display = "block";
}
function SelectTemplets(fname)
{
   if(document.all){
     var posLeft = window.event.clientY-200;
     var posTop = window.event.clientX-300;
   }
   else{
     var posLeft = 100;
     var posTop = 100;
   }
   window.open("/include/dialog/select_templets.php?&activepath=<?php echo urlencode($cfg_templets_dir)?>&f="+fname, "poptempWin", "scrollbars=yes,resizable=yes,statebar=no,width=600,height=400,left="+posLeft+", top="+posTop);
}
function CheckSubmit(){
   if(document.form1.title.value==""){
       alert("自由列表标题标题不能为空！");
	   document.form1.title.focus();
	   return false;
   }
   return true;
}
</script>
</head>
<body background='img/allbg.gif' leftmargin='8' topmargin='8'>
<center>
<div style="display:none" id="list1">
<li>[field:textlink/]</li>
</div>

<div style="display:none" id="list2">
<li>[[field:typelink/]][field:textlink/]</li>
</div>

<div style="display:none" id="list3">
<table width='98%' border='0' cellspacing='2' cellpadding='0'>
   <tr><td align='center'>[field:imglink/]</td></tr>
   <tr><td align='center'>[field:textlink/]</td></tr>
</table>
</div>

<div style="display:none" id="list4">
<li>
   [field:imglink/]
    [field:textlink/]
    <span class="info">
        <small>日期：</small>[field:pubdate function="GetDateMK(@me)"/]
        <small>点击：</small>[field:click/]
        <small>好评：</small>[field:scores/]
    </span>
    <p class="intro"> [field:description/]...</p>
    </li>
</div>
  <table width="98%" border="0" cellpadding="1" cellspacing="1" align="center" class="tbtitle" style="background:#E2F5BC;">
    <tr>
      <td align="left" bgcolor="#EDF9D5">
      	<strong>按字母检索列表</strong>
      </td>
      <td align="right" bgcolor="#EDF9D5"></td>
    </tr>
  </table>
  <table width="98%" border="0" cellpadding="1" cellspacing="1" align="center" class="tbtitle" style="background:#E2F5BC;">
    <form action="lettersort_main.php" method="post"  name="form1" onSubmit="return CheckSubmit();">
      <input type="hidden" name="action" value="add">
      <tr>
        <td height="265" valign="top" bgcolor="#FFFFFF"><table width="99%" border="0" align="center" cellpadding="0" cellspacing="1">
            <tr>
              <td height="56"> <table width="100%" border="0" cellspacing="1" cellpadding="0">
                  <tr>
                    <td height="28" colspan="2" align="left"><img src="img/help.gif" width="16" height="16">字母检索列表：该插件将对全站数据进行按首字母检索生成列表</td>
                  </tr>
                  <tr>
                    <td width="16%" height="28" align="left">标题:</td>
                    <td width="84%" align="left"><input name="title" type="text" id="title" value="<?php echo $letterconfig['showtitle'];?>" style="width:35%">&nbsp;&nbsp;该配置选项将成为列表页面的title信息 <font color="red">{letter}标签将被对应字母(A、B...Z)替换</font></td>
                  </tr>
                  <tr>
                    <td height="28" align="left">列表HTML存放目录：</td>
                    <td align="left"><input name="listdir" type="text" id="listdir" style="width:35%" value="<?php echo $letterconfig['listdir'];?>">
                      {listdir}变量的值 该配置为列表生成的目录</td>
                  </tr>
                  <tr>
                    <td height="28" align="left">命名规则：</td>
                    <td align="left"><input name="namerule" type="text" id="namerule" style="width:35%" value="<?php echo $letterconfig['namerule'];?>">&nbsp;&nbsp;{letter} 对应字母(A、B...Z), {page}---对应页数</td>
                  </tr>
                  <tr>
                    <td height="30" align="left">列表模板：</td>
                    <td align="left"><input name="templet" type="text" id="templet" style="width:300px" value="<?php echo $letterconfig['templet'];?>"> 针对字母检索列表的模板文件(安装该插件以后，将自动生成该实例模板，用户可以自己修改模板)</td>
                  </tr>
                  <tr>
                    <td height="28" align="left">列表关键字：</td>
                    <td align="left"><input name="keywords" type="text" id="keywords" value="<?php echo $letterconfig['keywords'];?>" style="width:60%"></td>
                  </tr>
                  <tr>
                    <td height="28" align="left">列表描述：</td>
                    <td align="left"><textarea name="description" id="description" style="width:60%;height:50px"><?php echo $letterconfig['description'];?></textarea></td>
                  </tr>
				  <tr>
                    <td height="28" align="left">列表第一页地址取消页数:</td>
                    <td align="left"><input type="checkbox" id="nodefault" name="nodefault" value="0"<?php if ($letterconfig['nodefault'] == 0){echo " checked";}?>><label for="nodefault">是</label>&nbsp;&nbsp;配置是否对字母检索的第一个页面的{page}值取消,如:页面地址 /dedecms/uploads/D_1.html 选中以后将更改为 /dedecms/uploads/D.html</td>
                  </tr>
                </table></td>
            </tr>
            <tr>
              <td height="26" align="left" style="background:#E2F5BC;">列表样式：(这里是列表模板里的{dede:letterlist
                /}标记的样式和属性)</td>
            </tr>
            <tr>
              <td height="72" align="left"><table width="99%" border="0" cellspacing="0" cellpadding="0">
                  <tr>
                    <td width="25%" height="126"><img src="img/g_t2.gif" width="130" height="100">
                      <input name="liststyle"  type="radio" onClick="ChangeListStyle()" value="1">
                    </td>
                    <td width="25%"><img src="img/g_t1.gif" width="130" height="110">
                      <input type="radio"  onClick="ChangeListStyle()" name="liststyle" value="2"></td>
                    <td width="25%"><img src="img/g_t3.gif" width="130" height="110">
                      <input type="radio"  onClick="ChangeListStyle()" name="liststyle" value="3"></td>
                    <td><img src="img/g_t4.gif" width="130" height="110"> <input name="liststyle" type="radio"  onClick="ChangeListStyle()" value="4"></td>
                  </tr>
                </table></td>
            </tr>
            <tr>
              <td height="28" align="left">每页记录数：
                <input name="pagesize" type="text" id="pagesize" value="<?php echo $pagesize;?>" size="4">
                　显示列数：
                <input name="col" type="text" id="col3" value="<?php echo $col;?>" size="4">
                标题长度：
                <input name="titlelen" type="text" id="titlelen" value="<?php echo $titlelen;?>" size="4">
                （1 字节 = 0.5个中文字）</td>
            </tr>
            <tr>
              <td height="28" align="left"> 高级筛选：
                <input name="types[]" type="checkbox" id="type1" value="image"<?php if(eregi('image',$setype)) echo ' checked';?>>
                带缩略图
                <input name="types[]" type="checkbox" id="type2" value="commend"<?php if(eregi('commend',$setype)) echo ' checked';?>>
                推荐
                <input name="types[]" type="checkbox" id="type3" value="spec"<?php if(eregi('spec',$setype)) echo ' checked';?>>
                专题　关键字：
                <input name="keywordarc" type="text" id="keywordarc" value="<?php echo $keywordarc;?>">
                （&quot;,&quot;逗号分开）</td>
            </tr>
            <tr>
              <td height="28" align="left">排列顺序：
                <select name="orderby" id="orderby" style="width:120">
                  <option value="sortrank"<?php if ($orderby == 'sortrank') echo 'selected';?>>置顶权限值</option>
                  <option value="pubdate"<?php if ($orderby == 'pubdate') echo 'selected';?>>发布时间</option>
                  <option value="senddate"<?php if ($orderby == 'senddate') echo 'selected';?>>录入时间</option>
                  <option value="click"<?php if ($orderby == 'click') echo 'selected';?>>点击量</option>
                  <option value="id"<?php if ($orderby == 'id') echo 'selected';?>>文档ＩＤ</option>
                  <option value="lastpost"<?php if ($orderby == 'lastpost') echo 'selected';?>>最后评论时间</option>
                  <option value="postnum"<?php if ($orderby == 'postnum') echo 'selected';?>>评论总数</option>
                </select>
                　
                <input name="order" type="radio"   value="desc"<?php if($order == 'desc') echo ' checked';?>>
                由高到低
                <input type="radio" name="order" value="asc"<?php if($order == 'asc') echo ' checked';?>>
                由低到高</td>
            </tr>
            <tr>
              <td height="28" align="left">循环内的单行记录样式(InnerText)：[<a href='javascript:ShowHide("innervar");'><img src="img/help.gif" width="16" height="16" border="0">底层变量field参考</a>]</td>
            </tr>
            <tr>
              <td height="99" align="left"> <textarea name="innertext" cols="80" rows="6" id="myinnertext" style="width:80%;height:120px"><?php echo $innertext;?></textarea>
              </td>
            </tr>
            <tr>
              <td height="80" align="left" id='innervar' style="display:none"><font color="#CC6600"><img src="img/help.gif" width="16" height="16">支持字段(底层变量[field:varname/])：id,title,color,typeid,ismake,description,pubdate,senddate,arcrank,click,litpic,typedir,typename,arcurl,typeurl,<br>
                stime(pubdate 的&quot;0000-00-00&quot;格式),textlink,typelink,imglink,image
                普通字段直接用[field:字段名/]表示。<br>
                ·Pubdate发布时间的调用参数 [field:pubdate function=MyDate('Y-m-d H:i:s',@me)/]</font>
              </td>
            </tr>
            <tr>
              <td height="50" align="left"> &nbsp; <input name="Submit2" type="submit" id="Submit2" value="保存配置" class="coolbg" />&nbsp;&nbsp;<input name="button" type="button" id="button" value="转换表数据" class="coolbg" onclick="javascript:location='lettersort_main.php?action=altertable';" />&nbsp;&nbsp;<input name="makehtml" type="button" id="makehtml" value="生成列表页面" class="coolbg" onclick="javascript:location='lettersort_main.php?action=makehtml';" />
              </td>
            </tr>
          </table></td>
      </tr>
    </form>
    <tr>
      <td valign="top" bgcolor="#EDF9D5">&nbsp;</td>
    </tr>
  </table>
</center>
</body>
</html>